// This C code was automatically generated by Aixt Project
// Device = Emulator
// Board = Software Emulator
// Backend = c

#include <stdbool.h>
#include <stdlib.h>
#if defined(__linux) || defined(linux)
#define CLEAR_SCREEN    "clear" // for Linux
#else
#define CLEAR_SCREEN    "cls"   // for Windows
#endif
#if defined(__linux) || defined(linux)
#include <unistd.h>
#else
#include <windows.h>
#endif
#if defined(__linux) || defined(linux)
#define time__sleep_ms(TMS)		usleep(TMS*1000)
#else
#define time__sleep_ms(TMS)		Sleep(TMS)
#endif
#include <stdio.h>
#define		pwm__out_0		0
#define		pwm__out_1		1

long duty__[] = {0, 0};

enum main__Pin_names {
	a = 0,
	b,
	c,
	d,
	w,
	x,
	y,
	z,
};

void main__init() {
	    printf("\033[1;37m");    // white bold text in terminal
}

void time__init() {
}

void pwm__print(int duty) {
	    for(int i__ = 1; i__ <= 50; i__++) {
		        if(i__ <= duty/2) {
			            printf("|");
			        } else {
			            printf("_");
			        }
		    }
	    printf("\n");
}

void pwm__update() {
	    system(CLEAR_SCREEN);
	    printf(" Aixt virtual PWM outputs\n");
	    printf("\t\t\t\t    PWM 0 :  %ld %%\n", duty__[0]);
	    pwm__print(duty__[0]);
	    printf("\t\t\t\t    PWM 1 :  %ld %%\n", duty__[1]);
	    pwm__print(duty__[1]);
}

void pwm__init() {
	pwm__update();
}

void pwm__write(long channel, long duty) {
	duty__[channel] = duty;
	pwm__update();
}

int main() {
	main__init();
	time__init();
	pwm__init();
	
	pwm__write(pwm__out_1, 100);
	for(int i=1; i<100; i++) {
		time__sleep_ms(250);
		pwm__write(pwm__out_0, i);
		pwm__write(pwm__out_1, 100 - i);
	}
	return 0;
}
